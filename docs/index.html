<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Accessor package for downloading OHDSI goodies • vault</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Accessor package for downloading OHDSI goodies">
<meta property="og:description" content="This package sets a connection to a repository and access OHDSI components to use in a study.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">vault</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/use_vault.html">Using Vault</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="vault">vault<a class="anchor" aria-label="anchor" href="#vault"></a>
</h1></div>
<p>Accessor package for downloading OHDSI goodies</p>
<div class="section level2">
<h2 id="how-to-use">How to use<a class="anchor" aria-label="anchor" href="#how-to-use"></a>
</h2>
<div class="section level3">
<h3 id="set-up-pat">Set up PAT<a class="anchor" aria-label="anchor" href="#set-up-pat"></a>
</h3>
<p>First need to set up git credentials via a Personal Access Toekn (PAT). This is best done using the <code>gitcreds</code> package. If you have a <code>GITHUB_PAT</code> set in your .Renviron, you should reconfigure this to work with the <code>gitcreds</code> package as this is the most secure way to handle PATs. To do this, first create a PAT in the developer settings. Once a new PAT is created run:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">gitcreds</span><span class="fu">::</span><span class="fu"><a href="https://gitcreds.r-lib.org/reference/gitcreds_get.html" class="external-link">gitcreds_set</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>In the console, paste in your new PAT and set the credentials. You must update this set if your PAT expires. Once this is set you can delete the <code>GITHUB_PAT</code> set in your .Renviron. For more thorough instructions follow the documentation of <code>gitcreds_set</code>.</p>
</div>
<div class="section level3">
<h3 id="accessing-vaults">Accessing vaults<a class="anchor" aria-label="anchor" href="#accessing-vaults"></a>
</h3>
<p>After your PAT has been setup using <code>gitcreds</code>, you can start working with vault! The first step is to create a vault object. The input for the vault is a repo string structured as follows <code>&lt;org&gt;/&lt;repo&gt;</code>. The other input to the vault object is the save path of where to store objects from the vault at checkout. The default save path is the project directory via <code><a href="https://here.r-lib.org//reference/here.html" class="external-link">here::here()</a></code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vv</span> <span class="op">&lt;-</span> <span class="fu">vault</span><span class="fu">::</span><span class="fu"><a href="reference/vault.html">vault</a></span><span class="op">(</span><span class="st">"OdyOSG/testRepo"</span>, savePath <span class="op">=</span> <span class="st">"~/R/my_ohdsi_project"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="checking-vault">Checking Vault<a class="anchor" aria-label="anchor" href="#checking-vault"></a>
</h3>
<p>Now we have a few options to start with just the vault object initialized. One can <code>checkAccess</code> to see if they are able to connect to the organization repository or one can <code>listContents</code> of the vault. The <code>listContents</code> command returns a tibble with items scrapped from the README.md file of the sub-directory. An example of the <code>listContents</code> command would be:</p>
<table style="width:100%;" class="table">
<colgroup>
<col width="14%">
<col width="14%">
<col width="14%">
<col width="14%">
<col width="14%">
<col width="14%">
<col width="14%">
</colgroup>
<thead><tr class="header">
<th>org</th>
<th>repo</th>
<th>name</th>
<th>type</th>
<th>version</th>
<th>maintainer</th>
<th>description</th>
</tr></thead>
<tbody><tr class="odd">
<td>OdyOSG</td>
<td>testRepo</td>
<td>simpleCondtion</td>
<td>capr script</td>
<td>0.0.1</td>
<td>Martin Lavallee</td>
<td>create a simple condition cohort using Capr</td>
</tr></tbody>
</table>
<p>An example of using these functions is shown below:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">vault</span><span class="fu">::</span><span class="fu"><a href="reference/checkAccess.html">checkAccess</a></span><span class="op">(</span><span class="va">vv</span><span class="op">)</span></span>
<span><span class="fu">vault</span><span class="fu">::</span><span class="fu"><a href="reference/listContents.html">listContents</a></span><span class="op">(</span><span class="va">vv</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="preview-vault-item">Preview Vault Item<a class="anchor" aria-label="anchor" href="#preview-vault-item"></a>
</h3>
<p>Using the <code>listContents</code> tibble, a user can search for items of interest to them. If there is an item of interest, the user can preview the README file in the vault to get more information about the contents. An example of the <code>preview</code> command is shown below:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">vault</span><span class="fu">::</span><span class="fu"><a href="reference/preview.html">preview</a></span><span class="op">(</span><span class="va">vv</span>, item <span class="op">=</span> <span class="st">"simpleCondition"</span><span class="op">)</span></span></code></pre></div>
<p>where the item ‘simpleCondition’ is an item in the testRepo directory. The preview command launches the README file in the Viewer tab in RStudio.</p>
</div>
<div class="section level3">
<h3 id="checkout-items-from-vault">Checkout Items from vault<a class="anchor" aria-label="anchor" href="#checkout-items-from-vault"></a>
</h3>
<p>Once the user has found the items in the vault we want to use, they can be checkout or downloaded to the path specified in the vault object. The following code shows how to checkout a single item:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">vault</span><span class="fu">::</span><span class="fu"><a href="reference/checkout.html">checkout</a></span><span class="op">(</span><span class="va">vv</span>, item <span class="op">=</span> <span class="st">"simpleCondition"</span><span class="op">)</span></span></code></pre></div>
<p>This will download the files to your save path and also open the file in RStudio to navigate. The <code>vault</code> package also has verbose output, meaning it provides a message in the console detailing what file was downloaded and to where.</p>
<p>Users can also checkout multiple items from a vault. To do so, the user must specify all items they wish to checkout via a character string. An example is shown below:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cart</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"simpleCondition"</span>, <span class="st">"simpleDrug"</span><span class="op">)</span></span>
<span><span class="fu">vault</span><span class="fu">::</span><span class="fu"><a href="reference/mapCheckout.html">mapCheckout</a></span><span class="op">(</span><span class="va">vv</span>, items <span class="op">=</span> <span class="va">cart</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>Apache License (&gt;= 2)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing vault</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Martin Lavallee <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>



  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Martin Lavallee.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
